# ============================================
# GOAT PREDICTION ULTIMATE - STAGING ENVIRONMENT
# ============================================
# Configuration pour l'environnement de staging/pre-production
# Similaire à la production mais avec des données de test
# ============================================

# ============================================
# ENVIRONMENT & DEPLOYMENT
# ============================================

# Environment
NODE_ENV=production
APP_ENV=staging
TZ=UTC
LOG_LEVEL=info
DEPLOYMENT_TIER=staging
RELEASE_CHANNEL=beta

# Application
APP_NAME=GOAT Prediction Staging
APP_VERSION=${GIT_COMMIT_SHA:-1.0.0-staging}
APP_URL=https://staging.goat-prediction.com
API_URL=https://api-staging.goat-prediction.com
ML_API_URL=https://ml-api-staging.goat-prediction.com
WS_URL=wss://ws-staging.goat-prediction.com
CDN_URL=https://cdn-staging.goat-prediction.com

# Feature Flags (Staging - enable new features for testing)
ENABLE_BETTING=true
ENABLE_LIVE_PREDICTIONS=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_MULTI_SPORT=true
ENABLE_DEBUG_MODE=false
ENABLE_API_DOCS=true
ENABLE_SWAGGER_UI=true
ENABLE_HOT_RELOAD=false
ENABLE_EXPERIMENTAL_FEATURES=true
ENABLE_BETA_FEATURES=true
ENABLE_A_B_TESTING=true

# Sports Configuration
SUPPORTED_SPORTS=football,basketball,tennis,esports
DEFAULT_SPORT=football
SPORTS_DATA_REFRESH_INTERVAL=120

# ============================================
# DATABASE STAGING (Separate from Production)
# ============================================

# PostgreSQL Staging (Isolated from production)
POSTGRES_HOST=${STAGING_POSTGRES_HOST}
POSTGRES_PORT=5432
POSTGRES_USER=${STAGING_POSTGRES_USER}
POSTGRES_PASSWORD=${STAGING_POSTGRES_PASSWORD}
POSTGRES_DB=goat_prediction_staging
POSTGRES_SSL_MODE=require
POSTGRES_POOL_SIZE=20
POSTGRES_TIMEOUT=30
POSTGRES_STATEMENT_TIMEOUT=60000

# TimescaleDB Staging
TIMESCALE_HOST=${STAGING_TIMESCALE_HOST}
TIMESCALE_PORT=5432
TIMESCALE_USER=${STAGING_TIMESCALE_USER}
TIMESCALE_PASSWORD=${STAGING_TIMESCALE_PASSWORD}
TIMESCALE_DB=goat_timeseries_staging
TIMESCALE_SSL_MODE=require
TIMESCALE_POOL_SIZE=15

# Redis Staging Cluster
REDIS_HOST=${STAGING_REDIS_HOST}
REDIS_PORT=6379
REDIS_PASSWORD=${STAGING_REDIS_PASSWORD}
REDIS_DB=0
REDIS_SSL=true
REDIS_CACHE_TTL=1800
REDIS_SESSION_TTL=43200
REDIS_RATE_LIMIT_TTL=60
REDIS_MAX_CONNECTIONS=500

# MongoDB Staging
MONGO_URI=${STAGING_MONGO_URI}
MONGO_SSL=true
MONGO_RETRY_WRITES=true
MONGO_MAX_POOL_SIZE=25
MONGO_MIN_POOL_SIZE=5

# ============================================
# API GATEWAY STAGING
# ============================================

API_PORT=8000
API_HOST=0.0.0.0
API_WORKERS=${API_WORKERS:-4}
API_CONCURRENCY=500
API_MAX_REQUESTS=5000
API_BACKLOAD=1024
API_KEEP_ALIVE=30
API_TIMEOUT=60000
API_MAX_BODY_SIZE=5mb

# JWT Staging
JWT_SECRET=${STAGING_JWT_SECRET}
JWT_ALGORITHM=HS256
JWT_EXPIRES_IN=30m
JWT_REFRESH_EXPIRES_IN=7d
JWT_ISSUER=goat-prediction-staging
JWT_AUDIENCE=goat-prediction-staging-users
JWT_COOKIE_DOMAIN=.goat-prediction.com
JWT_COOKIE_SECURE=true
JWT_COOKIE_HTTPONLY=true
JWT_COOKIE_SAMESITE=lax

# API Keys Staging
API_KEYS=${STAGING_API_KEYS}
API_KEY_HEADER=X-API-Key
API_KEY_ROTATION_DAYS=7

# CORS Staging
CORS_ORIGINS=https://staging.goat-prediction.com,https://admin-staging.goat-prediction.com,http://localhost:3000
CORS_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key,X-Requested-With
CORS_CREDENTIALS=true
CORS_MAX_AGE=3600

# Rate Limiting Staging
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=500
RATE_LIMIT_SKIP_SUCCESS_REQUESTS=false

# ============================================
# ML ENGINE STAGING
# ============================================

ML_SERVICE_PORT=8001
ML_SERVICE_HOST=0.0.0.0
ML_WORKERS=${ML_WORKERS:-2}
ML_MODELS_DIR=/shared/models/staging
ML_DATA_DIR=/shared/data/staging
ML_CACHE_DIR=/shared/cache/staging
ML_LOG_DIR=/shared/logs/ml-staging

# ML Configuration Staging
ML_BATCH_SIZE=32
ML_MAX_WORKERS=4
ML_GPU_ENABLED=false  # Disable GPU for staging to save costs
ML_PREDICTION_TIMEOUT=30
ML_TRAINING_TIMEOUT=1800
ML_MODEL_UPDATE_INTERVAL=3600
ML_MODEL_VERSIONING=true
ML_MODEL_MONITORING=true
ML_MODEL_AUTO_ROLLBACK=true

# Feature Store Staging
FEATURE_STORE_URL=http://feature-store-staging:8081
FEATURE_STORE_PROJECT=goat_prediction_staging
FEATURE_STORE_REGISTRY_PATH=/shared/feature_store/staging/registry.db

# MLflow Staging
MLFLOW_TRACKING_URI=http://mlflow-staging:5000
MLFLOW_BACKEND_STORE_URI=postgresql://${STAGING_POSTGRES_USER}:${STAGING_POSTGRES_PASSWORD}@${STAGING_POSTGRES_HOST}:5432/mlflow_staging
MLFLOW_ARTIFACT_ROOT=s3://goat-prediction-mlflow-staging/artifacts
MLFLOW_EXPERIMENT_NAME=goat-prediction-staging

# ============================================
# DATA COLLECTION STAGING (Test/Sandbox APIs)
# ============================================

# Sports Data APIs (Sandbox/Test keys)
STATSBOMB_API_KEY=${STAGING_STATSBOMB_API_KEY}
OPTA_API_KEY=${STAGING_OPTA_API_KEY}
SPORTRADAR_API_KEY=${STAGING_SPORTRADAR_API_KEY}
WYSCOUT_API_KEY=${STAGING_WYSCOUT_API_KEY}

# Betting APIs (Sandbox mode)
BETFAIR_APP_KEY=${STAGING_BETFAIR_APP_KEY}
BETFAIR_USERNAME=${STAGING_BETFAIR_USERNAME}
BETFAIR_PASSWORD=${STAGING_BETFAIR_PASSWORD}
BETFAIR_CERT_FILE=/secrets/betfair/staging.crt
BETFAIR_KEY_FILE=/secrets/betfair/staging.key
BETFAIR_SANDBOX_MODE=true

PINNACLE_API_USERNAME=${STAGING_PINNACLE_USERNAME}
PINNACLE_API_PASSWORD=${STAGING_PINNACLE_PASSWORD}
PINNACLE_SANDBOX=true

BET365_API_KEY=${STAGING_BET365_API_KEY}
WILLIAM_HILL_API_KEY=${STAGING_WILLIAM_HILL_API_KEY}

# News & Social APIs (Limited quotas)
NEWSAPI_API_KEY=${STAGING_NEWSAPI_API_KEY}
TWITTER_API_KEY=${STAGING_TWITTER_API_KEY}
TWITTER_API_SECRET=${STAGING_TWITTER_API_SECRET}
TWITTER_ACCESS_TOKEN=${STAGING_TWITTER_ACCESS_TOKEN}
TWITTER_ACCESS_SECRET=${STAGING_TWITTER_ACCESS_SECRET}

REDDIT_CLIENT_ID=${STAGING_REDDIT_CLIENT_ID}
REDDIT_CLIENT_SECRET=${STAGING_REDDIT_CLIENT_SECRET}
REDDIT_USER_AGENT=goat-prediction-staging/1.0.0

# Weather APIs
OPENWEATHER_API_KEY=${STAGING_OPENWEATHER_API_KEY}
ACCUWEATHER_API_KEY=${STAGING_ACCUWEATHER_API_KEY}

# ============================================
# MESSAGE QUEUE STAGING
# ============================================

# Kafka Staging
KAFKA_BROKERS=${STAGING_KAFKA_BROKERS}
KAFKA_GROUP_ID=goat-prediction-staging
KAFKA_AUTO_OFFSET_RESET=latest
KAFKA_ENABLE_AUTO_COMMIT=false
KAFKA_SESSION_TIMEOUT_MS=45000
KAFKA_MAX_POLL_INTERVAL_MS=300000
KAFKA_MAX_POLL_RECORDS=100
KAFKA_SECURITY_PROTOCOL=SASL_SSL
KAFKA_SASL_MECHANISM=SCRAM-SHA-256
KAFKA_SASL_USERNAME=${STAGING_KAFKA_USERNAME}
KAFKA_SASL_PASSWORD=${STAGING_KAFKA_PASSWORD}

# Kafka Topics Staging
KAFKA_TOPIC_PREDICTIONS=staging-predictions
KAFKA_TOPIC_BETS=staging-bets
KAFKA_TOPIC_ODDS=staging-odds
KAFKA_TOPIC_MATCHES=staging-matches
KAFKA_TOPIC_ALERTS=staging-alerts
KAFKA_TOPIC_ANALYTICS=staging-analytics

# ============================================
# MONITORING STAGING
# ============================================

# Sentry Staging
SENTRY_ENABLED=true
SENTRY_DSN=${STAGING_SENTRY_DSN}
SENTRY_ENVIRONMENT=staging
SENTRY_TRACES_SAMPLE_RATE=0.5
SENTRY_PROFILES_SAMPLE_RATE=0.5
SENTRY_RELEASE=${APP_VERSION}
SENTRY_DEBUG=false

# Logging Staging
LOG_FORMAT=json
LOG_FILE=/var/log/goat-prediction-staging/app.log
LOG_MAX_SIZE=50MB
LOG_MAX_FILES=10
LOG_COMPRESS=true
LOG_LEVEL_STDOUT=info
LOG_LEVEL_FILE=debug
LOG_SLOW_QUERIES=true
SLOW_QUERY_THRESHOLD=5000

# Prometheus Staging
PROMETHEUS_PORT=9090
PROMETHEUS_PREFIX=goat_prediction_staging
PROMETHEUS_DEFAULT_METRICS=true

# Grafana Staging
GRAFANA_URL=https://grafana-staging.goat-prediction.com
GRAFANA_USER=${STAGING_GRAFANA_USER}
GRAFANA_PASSWORD=${STAGING_GRAFANA_PASSWORD}

# Alerting Staging
ALERTMANAGER_URL=https://alertmanager-staging.goat-prediction.com
ALERT_SLACK_WEBHOOK=${STAGING_SLACK_WEBHOOK}
ALERT_EMAIL_RECIPIENTS=staging-alerts@goat-prediction.com

# Performance Monitoring
NEW_RELIC_ENABLED=true
NEW_RELIC_LICENSE_KEY=${STAGING_NEW_RELIC_KEY}
NEW_RELIC_APP_NAME=goat-prediction-staging

DATADOG_ENABLED=false  # Disable Datadog for staging to save costs

# ============================================
# EMAIL STAGING (Test mode)
# ============================================

EMAIL_ENABLED=true
EMAIL_HOST=smtp.mailtrap.io
EMAIL_PORT=2525
EMAIL_USER=${STAGING_MAILTRAP_USER}
EMAIL_PASSWORD=${STAGING_MAILTRAP_PASSWORD}
EMAIL_FROM=staging@goat-prediction.com
EMAIL_FROM_NAME=GOAT Prediction Staging
EMAIL_TEMPLATE_DIR=/app/templates/email

# SMTP Staging
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_SECURE=false
SMTP_IGNORE_TLS=false
SMTP_REQUIRE_TLS=true

# Transactional Email Service (Test mode)
SENDGRID_API_KEY=${STAGING_SENDGRID_API_KEY}
SENDGRID_SANDBOX_MODE=true

# ============================================
# SMS & NOTIFICATIONS STAGING
# ============================================

# SMS Staging (Twilio Test Credentials)
SMS_ENABLED=true
TWILIO_ACCOUNT_SID=${STAGING_TWILIO_ACCOUNT_SID}
TWILIO_AUTH_TOKEN=${STAGING_TWILIO_AUTH_TOKEN}
TWILIO_PHONE_NUMBER=+15005550006  # Twilio test number
TWILIO_MESSAGING_SERVICE_SID=${STAGING_TWILIO_MESSAGING_SERVICE_SID}

# Push Notifications Staging
PUSH_ENABLED=true
FIREBASE_PROJECT_ID=goat-prediction-staging
FIREBASE_PRIVATE_KEY=${STAGING_FIREBASE_PRIVATE_KEY}
FIREBASE_CLIENT_EMAIL=firebase-adminsdk@goat-prediction-staging.iam.gserviceaccount.com

# Webhooks Staging
WEBHOOK_ENABLED=true
WEBHOOK_SECRET=${STAGING_WEBHOOK_SECRET}
WEBHOOK_TIMEOUT=5000
WEBHOOK_MAX_RETRIES=3

# ============================================
# PAYMENT STAGING (Test mode only!)
# ============================================

# Stripe Staging (TEST MODE ONLY!)
STRIPE_ENABLED=true
STRIPE_SECRET_KEY=${STAGING_STRIPE_SECRET_KEY}
STRIPE_PUBLISHABLE_KEY=${STAGING_STRIPE_PUBLISHABLE_KEY}
STRIPE_WEBHOOK_SECRET=${STAGING_STRIPE_WEBHOOK_SECRET}
STRIPE_CONNECT_CLIENT_ID=${STAGING_STRIPE_CONNECT_CLIENT_ID}
STRIPE_API_VERSION=2023-10-16

# Subscription Plans Staging (Test)
SUBSCRIPTION_PLANS=basic,premium,vip
SUBSCRIPTION_TRIAL_DAYS=7
SUBSCRIPTION_GRACE_PERIOD_DAYS=3

# Basic Plan Staging
BASIC_PLAN_PRICE_ID=${STAGING_BASIC_PLAN_PRICE_ID}
BASIC_PLAN_MONTHLY_PRICE=9.99
BASIC_PLAN_YEARLY_PRICE=99.99

# Premium Plan Staging
PREMIUM_PLAN_PRICE_ID=${STAGING_PREMIUM_PLAN_PRICE_ID}
PREMIUM_PLAN_MONTHLY_PRICE=29.99
PREMIUM_PLAN_YEARLY_PRICE=299.99

# VIP Plan Staging
VIP_PLAN_PRICE_ID=${STAGING_VIP_PLAN_PRICE_ID}
VIP_PLAN_MONTHLY_PRICE=99.99
VIP_PLAN_YEARLY_PRICE=999.99

# Payment Processors Staging
PAYPAL_CLIENT_ID=${STAGING_PAYPAL_CLIENT_ID}
PAYPAL_CLIENT_SECRET=${STAGING_PAYPAL_CLIENT_SECRET}
PAYPAL_MODE=sandbox

BRAINTREE_MERCHANT_ID=${STAGING_BRAINTREE_MERCHANT_ID}
BRAINTREE_PUBLIC_KEY=${STAGING_BRAINTREE_PUBLIC_KEY}
BRAINTREE_PRIVATE_KEY=${STAGING_BRAINTREE_PRIVATE_KEY}
BRAINTREE_ENVIRONMENT=sandbox

# ============================================
# FILE STORAGE STAGING
# ============================================

# AWS S3 Staging (Separate bucket)
STORAGE_DRIVER=s3
AWS_ACCESS_KEY_ID=${STAGING_AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${STAGING_AWS_SECRET_ACCESS_KEY}
AWS_REGION=${STAGING_AWS_REGION}
AWS_S3_BUCKET=goat-prediction-staging
AWS_S3_ENDPOINT=
AWS_S3_FORCE_PATH_STYLE=false
AWS_S3_ACL=private
AWS_S3_SIGNATURE_VERSION=v4

# Cloudinary Staging
CLOUDINARY_CLOUD_NAME=${STAGING_CLOUDINARY_CLOUD_NAME}
CLOUDINARY_API_KEY=${STAGING_CLOUDINARY_API_KEY}
CLOUDINARY_API_SECRET=${STAGING_CLOUDINARY_API_SECRET}
CLOUDINARY_SECURE=true

# ============================================
# SECURITY STAGING
# ============================================

# Password Policy Staging
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=false
PASSWORD_MAX_ATTEMPTS=10
PASSWORD_LOCKOUT_DURATION=900

# Session Security
SESSION_SECRET=${STAGING_SESSION_SECRET}
SESSION_COOKIE_NAME=goat_prediction_staging_session
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax
SESSION_COOKIE_MAX_AGE=43200

# CSRF Protection
CSRF_ENABLED=true
CSRF_COOKIE_NAME=goat_prediction_staging_csrf
CSRF_COOKIE_SECURE=true
CSRF_COOKIE_HTTPONLY=false
CSRF_COOKIE_SAMESITE=strict

# Security Headers
SECURITY_HEADERS_ENABLED=true
X_FRAME_OPTIONS=SAMEORIGIN
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block

# ============================================
# FRONTEND STAGING
# ============================================

# Next.js Staging
NEXT_PUBLIC_APP_ENV=staging
NEXT_PUBLIC_API_URL=https://api-staging.goat-prediction.com
NEXT_PUBLIC_WS_URL=wss://ws-staging.goat-prediction.com
NEXT_PUBLIC_SENTRY_DSN=${STAGING_SENTRY_DSN}
NEXT_PUBLIC_GA_MEASUREMENT_ID=${STAGING_GA_MEASUREMENT_ID}
NEXT_PUBLIC_MAPBOX_TOKEN=${STAGING_MAPBOX_TOKEN}
NEXT_PUBLIC_APP_VERSION=${APP_VERSION}
NEXT_PUBLIC_ENABLE_ANALYTICS=true
NEXT_TELEMETRY_DISABLED=1

# React Staging
REACT_APP_API_URL=https://api-staging.goat-prediction.com
REACT_APP_WS_URL=wss://ws-staging.goat-prediction.com
REACT_APP_SENTRY_DSN=${STAGING_SENTRY_DSN}
REACT_APP_VERSION=${APP_VERSION}

# PWA Staging
PWA_ENABLED=true
PWA_CACHE_ENABLED=true
PWA_OFFLINE_ENABLED=false  # Disable offline for staging
PWA_UPDATE_ENABLED=true

# ============================================
# TESTING & QUALITY ASSURANCE
# ============================================

# QA Testing
QA_MODE_ENABLED=true
QA_TEST_USERS_ENABLED=true
QA_TEST_DATA_ENABLED=true
QA_AUTO_TEST_ENABLED=true
QA_PERFORMANCE_TESTING=true
QA_LOAD_TESTING=true
QA_SECURITY_TESTING=true

# Test Data
TEST_DATA_SEED_ENABLED=true
TEST_DATA_PATH=/app/test-data
TEST_DATA_REFRESH_INTERVAL=86400

# A/B Testing
AB_TESTING_ENABLED=true
AB_TEST_VARIANTS=A,B,C
AB_TEST_ALLOCATION_RATIO=33,33,34
AB_TEST_MINIMUM_SAMPLES=1000

# Feature Flags Testing
FEATURE_FLAG_OVERRIDE_ENABLED=true
FEATURE_FLAG_DEFAULT_STATE=false
FEATURE_FLAG_ROLLOUT_PERCENTAGE=50

# ============================================
# BETTING STAGING (Virtual mode)
# ============================================

BETTING_TEST_MODE=true
BETTING_VIRTUAL_BANKROLL=50000
BETTING_MIN_STAKE=5
BETTING_MAX_STAKE=500
BETTING_DEFAULT_STAKE_PERCENTAGE=0.5
BETTING_KELLY_FRACTION=0.2
BETTING_MAX_BETS_PER_DAY=50
BETTING_MAX_CONCURRENT_BETS=10

# Risk Management Staging
RISK_MAX_DAILY_LOSS=1000
RISK_MAX_SINGLE_LOSS=200
RISK_STOP_LOSS_PERCENTAGE=15
RISK_TAKE_PROFIT_PERCENTAGE=25
RISK_DRAWDOWN_LIMIT=30

# Odds Staging
ODDS_FORMAT=decimal
ODDS_MIN_VALUE=1.01
ODDS_MAX_VALUE=100
ODDS_REFRESH_INTERVAL=60

# ============================================
# PERFORMANCE & SCALING STAGING
# ============================================

# Load Testing Configuration
LOAD_TEST_ENABLED=true
LOAD_TEST_MAX_USERS=1000
LOAD_TEST_RAMP_UP_TIME=300
LOAD_TEST_DURATION=1800

# Performance Monitoring
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_SAMPLE_RATE=0.2
PERFORMANCE_METRICS_INTERVAL=30

# Auto Scaling Staging
AUTO_SCALING_ENABLED=true
AUTO_SCALING_MIN_INSTANCES=2
AUTO_SCALING_MAX_INSTANCES=5
AUTO_SCALING_CPU_THRESHOLD=60
AUTO_SCALING_MEMORY_THRESHOLD=70

# Cache Staging
CACHE_DRIVER=redis
CACHE_TTL=1800
CACHE_PREFIX=goat_staging_

# ============================================
# DEPLOYMENT & CI/CD
# ============================================

# CI/CD Integration
CI_ENVIRONMENT_NAME=staging
CI_PIPELINE_ID=${CI_PIPELINE_ID}
CI_COMMIT_SHA=${CI_COMMIT_SHA}
CI_COMMIT_REF_NAME=${CI_COMMIT_REF_NAME}
CI_JOB_URL=${CI_JOB_URL}

# Deployment Configuration
DEPLOYMENT_STRATEGY=blue-green
DEPLOYMENT_HEALTH_CHECK_PATH=/health
DEPLOYMENT_HEALTH_CHECK_TIMEOUT=30
DEPLOYMENT_HEALTH_CHECK_INTERVAL=10
DEPLOYMENT_HEALTH_CHECK_THRESHOLD=3

# Rollback Configuration
ROLLBACK_ENABLED=true
ROLLBACK_THRESHOLD_ERROR_RATE=5
ROLLBACK_THRESHOLD_RESPONSE_TIME=2000
ROLLBACK_CHECK_INTERVAL=60

# Database Migrations
DB_MIGRATE_ON_DEPLOY=true
DB_ROLLBACK_ON_FAILURE=true
DB_BACKUP_BEFORE_MIGRATE=true
DB_SEED_AFTER_MIGRATE=true

# ============================================
# BACKUP & DISASTER RECOVERY
# ============================================

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=7
BACKUP_STORAGE=s3://goat-prediction-backups-staging

# Disaster Recovery
DR_ENABLED=true
DR_RPO=3600  # Recovery Point Objective: 1 hour
DR_RTO=7200  # Recovery Time Objective: 2 hours
DR_FAILOVER_ENABLED=true

# Data Retention
DATA_RETENTION_DAYS=90
DATA_ARCHIVAL_ENABLED=true
DATA_ARCHIVAL_THRESHOLD_DAYS=30

# ============================================
# COMPLIANCE & AUDIT
# ============================================

# Audit Logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=180
AUDIT_LOG_COMPLIANCE_MODE=true

# Data Protection
GDPR_COMPLIANCE_ENABLED=true
CCPA_COMPLIANCE_ENABLED=true
DATA_ENCRYPTION_AT_REST=true
DATA_ENCRYPTION_IN_TRANSIT=true

# Access Control
ACCESS_CONTROL_ENABLED=true
ROLE_BASED_ACCESS_CONTROL=true
PERMISSION_VALIDATION_ENABLED=true

# ============================================
# DEVELOPER TOOLS (Staging only)
# ============================================

# Debug Tools (Limited in staging)
DEBUG_ENABLED=false
DEBUG_PORT=9229
DEBUG_HOST=0.0.0.0
DEBUG_BREAK_ON_START=false

# API Documentation
API_DOCS_ENABLED=true
API_DOCS_PATH=/api-docs
API_DOCS_AUTH_REQUIRED=true

# Database Tools
DB_TOOLS_ENABLED=true
DB_QUERY_LOGGING=true
DB_SLOW_QUERY_THRESHOLD=1000

# Performance Profiling
PROFILING_ENABLED=true
PROFILING_SAMPLE_RATE=0.1
PROFILING_OUTPUT_DIR=/tmp/profiling

# ============================================
# MAINTENANCE & OPERATIONS
# ============================================

# Maintenance Mode
MAINTENANCE_MODE_ENABLED=false
MAINTENANCE_MESSAGE=System undergoing scheduled maintenance
MAINTENANCE_START_TIME=
MAINTENANCE_END_TIME=

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PORT=8080
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=10000
HEALTH_CHECK_INTERVAL=30

# Metrics Export
METRICS_EXPORT_ENABLED=true
METRICS_EXPORT_INTERVAL=60
METRICS_EXPORT_FORMAT=prometheus

# Log Export
LOG_EXPORT_ENABLED=true
LOG_EXPORT_INTERVAL=300
LOG_EXPORT_DESTINATION=s3://goat-prediction-logs-staging

# ============================================
# SERVICE INTEGRATIONS
# ============================================

# Slack Integration
SLACK_WEBHOOK_URL=${STAGING_SLACK_WEBHOOK}
SLACK_CHANNEL=#staging-alerts
SLACK_USERNAME=GOAT-Staging-Bot
SLACK_ICON_EMOJI=:goat:

# JIRA Integration
JIRA_URL=https://your-company.atlassian.net
JIRA_USERNAME=${STAGING_JIRA_USERNAME}
JIRA_API_TOKEN=${STAGING_JIRA_API_TOKEN}
JIRA_PROJECT_KEY=GOAT

# GitHub Integration
GITHUB_TOKEN=${STAGING_GITHUB_TOKEN}
GITHUB_REPO=goat-prediction/ultimate
GITHUB_BRANCH=staging

# ============================================
# ENVIRONMENT SPECIFIC OVERRIDES
# ============================================

# Resource Limits (Optimized for staging)
CONTAINER_MEMORY_LIMIT=2G
CONTAINER_CPU_LIMIT=2
DATABASE_CONNECTIONS_LIMIT=50
REDIS_MEMORY_LIMIT=1G

# Timeouts (More lenient for testing)
REQUEST_TIMEOUT=30000
DATABASE_TIMEOUT=10000
CACHE_TIMEOUT=5000
EXTERNAL_API_TIMEOUT=15000

# Retry Policies
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_MS=1000
RETRY_BACKOFF_MULTIPLIER=2

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RESET_TIMEOUT=30000

# ============================================
# END OF STAGING CONFIGURATION
# ============================================
