# mlops/serving/torchserve/config.properties
# TorchServe Configuration for Goat Prediction Ultimate
# Production-grade configuration for PyTorch model serving

# ==================== SERVER CONFIGURATION ====================

# Inference address configuration
inference_address=http://0.0.0.0:8080
management_address=http://0.0.0.0:8081
metrics_address=http://0.0.0.0:8082

# Worker configuration
number_of_netty_threads=32
netty_client_threads=4
netty_server_threads=4
job_queue_size=1000
max_request_size=6553500
max_response_size=6553500

# Model store configuration
model_store=/mnt/models
load_models=football_match_winner,football_over_under,football_btts,basketball_moneyline,tennis_match_winner,esports_match_winner
model_snapshot={
  "name": "startup.cfg",
  "modelCount": 6,
  "models": {
    "football_match_winner": {
      "3.2.1": {
        "defaultVersion": true,
        "marName": "football_match_winner.mar",
        "minWorkers": 2,
        "maxWorkers": 8,
        "batchSize": 32,
        "maxBatchDelay": 100,
        "responseTimeout": 120,
        "initialWorkers": 2
      }
    }
  }
}

# ==================== MODEL CONFIGURATION ====================

# Football Match Winner Model
football_match_winner_3.2.1.model_name=football_match_winner
football_match_winner_3.2.1.model_file=football_match_winner.mar
football_match_winner_3.2.1.handler=goat_prediction_handler.py
football_match_winner_3.2.1.min_worker=2
football_match_winner_3.2.1.max_worker=8
football_match_winner_3.2.1.batch_size=32
football_match_winner_3.2.1.max_batch_delay=100
football_match_winner_3.2.1.response_timeout=120
football_match_winner_3.2.1.initial_workers=2
football_match_winner_3.2.1.synchronous=true
football_match_winner_3.2.1.gpu=0
football_match_winner_3.2.1.max_num_classes=1000
football_match_winner_3.2.1.cache_enabled=true
football_match_winner_3.2.1.cache_ttl=3600
football_match_winner_3.2.1.cache_size=1073741824
football_match_winner_3.2.1.enable_metrics=true
football_match_winner_3.2.1.metrics_mode=log
football_match_winner_3.2.1.metrics_format=prometheus

# Football Over/Under Model
football_over_under_2.1.0.model_name=football_over_under
football_over_under_2.1.0.model_file=football_over_under.mar
football_over_under_2.1.0.handler=goat_prediction_handler.py
football_over_under_2.1.0.min_worker=2
football_over_under_2.1.0.max_worker=6
football_over_under_2.1.0.batch_size=16
football_over_under_2.1.0.max_batch_delay=200
football_over_under_2.1.0.response_timeout=120
football_over_under_2.1.0.initial_workers=2
football_over_under_2.1.0.synchronous=true

# Football BTTS Model
football_btts_1.8.0.model_name=football_btts
football_btts_1.8.0.model_file=football_btts.mar
football_btts_1.8.0.handler=goat_prediction_handler.py
football_btts_1.8.0.min_worker=2
football_btts_1.8.0.max_worker=6
football_btts_1.8.0.batch_size=16
football_btts_1.8.0.max_batch_delay=200
football_btts_1.8.0.response_timeout=120
football_btts_1.8.0.initial_workers=2
football_btts_1.8.0.synchronous=true

# Basketball Moneyline Model
basketball_moneyline_2.0.0.model_name=basketball_moneyline
basketball_moneyline_2.0.0.model_file=basketball_moneyline.mar
basketball_moneyline_2.0.0.handler=goat_prediction_handler.py
basketball_moneyline_2.0.0.min_worker=2
basketball_moneyline_2.0.0.max_worker=6
basketball_moneyline_2.0.0.batch_size=16
basketball_moneyline_2.0.0.max_batch_delay=150
basketball_moneyline_2.0.0.response_timeout=120
basketball_moneyline_2.0.0.initial_workers=2
basketball_moneyline_2.0.0.synchronous=true

# Tennis Match Winner Model
tennis_match_winner_1.5.0.model_name=tennis_match_winner
tennis_match_winner_1.5.0.model_file=tennis_match_winner.mar
tennis_match_winner_1.5.0.handler=goat_prediction_handler.py
tennis_match_winner_1.5.0.min_worker=2
tennis_match_winner_1.5.0.max_worker=4
tennis_match_winner_1.5.0.batch_size=8
tennis_match_winner_1.5.0.max_batch_delay=300
tennis_match_winner_1.5.0.response_timeout=120
tennis_match_winner_1.5.0.initial_workers=2
tennis_match_winner_1.5.0.synchronous=true

# Esports Match Winner Model
esports_match_winner_1.2.0.model_name=esports_match_winner
esports_match_winner_1.2.0.model_file=esports_match_winner.mar
esports_match_winner_1.2.0.handler=goat_prediction_handler.py
esports_match_winner_1.2.0.min_worker=2
esports_match_winner_1.2.0.max_worker=4
esports_match_winner_1.2.0.batch_size=8
esports_match_winner_1.2.0.max_batch_delay=300
esports_match_winner_1.2.0.response_timeout=120
esports_match_winner_1.2.0.initial_workers=2
esports_match_winner_1.2.0.synchronous=true

# ==================== PERFORMANCE OPTIMIZATION ====================

# Memory optimization
default_workers_per_model=2
default_response_timeout=120
workflow_store=/tmp/workflows
model_store=/mnt/models
# JVM options for Java-based components
JAVA_OPTS=-Xmx4g -Xms2g -XX:+UseG1GC -XX:MaxGCPauseMillis=100 -XX:+ParallelRefProcEnabled -XX:+UnlockExperimentalVMOptions -XX:+DoEscapeAnalysis -XX:ParallelGCThreads=4 -XX:ConcGCThreads=2
# Python optimization
PYTHONPATH=/opt/ml/code
PYTHONUNBUFFERED=TRUE
OMP_NUM_THREADS=4
MKL_NUM_THREADS=4
OPENBLAS_NUM_THREADS=4
# GPU optimization
CUDA_VISIBLE_DEVICES=0
CUDA_CACHE_PATH=/tmp/cuda_cache
TORCH_CUDA_ARCH_LIST=7.0;7.5;8.0
# Batch processing
enable_batch=true
batch_max_delay=100
batch_size=32
batch_queue_size=1000
batch_pool_size=8

# ==================== MONITORING & METRICS ====================

# Prometheus metrics
enable_metrics=true
metrics_format=prometheus
metrics_address=http://0.0.0.0:8082
metrics_endpoint=/metrics
metrics_mode=log
metrics_interval=30
# Custom metrics
enable_custom_metrics=true
custom_metrics_list=prediction_latency,inference_count,cache_hit_ratio,error_count,batch_size_histogram
# Health checks
health_check_endpoint=/ping
health_check_interval=30
readiness_check_endpoint=/ready
liveness_check_endpoint=/live
# Logging
log_location=/var/log/torchserve
log_config_file=/etc/torchserve/log4j2.xml
default_log_level=INFO
async_logging=true
async_logging_queue_size=10000
# Tracing
enable_tracing=true
tracing_endpoint=jaeger-collector.monitoring.svc.cluster.local:14268
tracing_sampling_rate=0.1

# ==================== SECURITY CONFIGURATION ====================

# Authentication
enable_auth=true
auth_type=jwt
jwt_secret_path=/etc/secrets/jwt_secret.key
jwt_audience=torchserve
jwt_issuer=goat-prediction
# SSL/TLS
enable_ssl=true
ssl_cert_path=/etc/ssl/certs/torchserve.crt
ssl_key_path=/etc/ssl/private/torchserve.key
ssl_ca_path=/etc/ssl/certs/ca.crt
# CORS
cors_allowed_origin=*
cors_allowed_methods=GET,POST,PUT,DELETE,OPTIONS
cors_allowed_headers=*
cors_allow_credentials=true
# Rate limiting
enable_rate_limit=true
rate_limit_requests_per_second=1000
rate_limit_burst_size=100
# IP filtering
enable_ip_filter=true
allowed_ip_ranges=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
# Data encryption
enable_data_encryption=true
encryption_key_path=/etc/secrets/encryption.key
encryption_algorithm=AES-256-GCM
# Audit logging
enable_audit_log=true
audit_log_path=/var/log/torchserve/audit.log
audit_log_retention_days=90

# ==================== CACHING CONFIGURATION ====================

# Response caching
enable_response_cache=true
cache_backend=redis
redis_host=redis-cache.ml-production.svc.cluster.local
redis_port=6379
redis_password=${REDIS_PASSWORD}
cache_ttl=3600
cache_max_size=1073741824
cache_eviction_policy=lru
# Model caching
enable_model_cache=true
model_cache_size=2147483648
model_cache_ttl=7200
# Feature caching
enable_feature_cache=true
feature_cache_backend=redis
feature_cache_ttl=300
feature_cache_max_size=536870912

# ==================== MODEL MANAGEMENT ====================

# Model versioning
enable_model_versioning=true
model_version_format=semantic
max_versions_per_model=5
auto_cleanup_old_versions=true
cleanup_threshold_days=30
# Model warmup
enable_model_warmup=true
warmup_batch_sizes=1,8,16,32,64
warmup_iterations=100
warmup_data_path=/mnt/models/warmup_data
# Model health checks
enable_model_health_check=true
health_check_interval=300
health_check_timeout=30
# Model updates
enable_auto_model_update=false
model_update_check_interval=3600
model_update_url=https://model-registry.goat-prediction.com/models
# Model backup
enable_model_backup=true
backup_schedule=0 2 * * *
backup_retention_days=30
backup_storage=s3://goat-prediction-backups/torchserve-models/

# ==================== HANDLER CONFIGURATION ====================

# Custom handler
handler=goat_prediction_handler.py
handler_timeout=120
handler_max_retries=3
handler_initial_delay=1
handler_max_delay=30
handler_jitter=0.3
# Handler optimizations
handler_enable_batching=true
handler_batch_size=32
handler_max_batch_delay=100
handler_preprocess_timeout=10
handler_inference_timeout=100
handler_postprocess_timeout=10
# Feature store integration
feature_store_enabled=true
feature_store_endpoint=http://feast-feature-server.ml-production.svc.cluster.local:6566
feature_store_timeout=5
feature_store_cache_enabled=true
# External service integration
redis_enabled=true
redis_endpoint=redis://redis-cache.ml-production.svc.cluster.local:6379
redis_timeout=5
postgres_enabled=true
postgres_endpoint=jdbc:postgresql://postgres.ml-production.svc.cluster.local:5432/predictions
postgres_timeout=10

# ==================== SCALING & LOAD BALANCING ====================

# Auto-scaling
enable_auto_scaling=true
auto_scaling_min_workers=2
auto_scaling_max_workers=8
auto_scaling_target_utilization=0.7
auto_scaling_cooldown_period=300
auto_scaling_scale_up_delay=60
auto_scaling_scale_down_delay=300
# Load balancing
enable_load_balancing=true
load_balancing_algorithm=round_robin
load_balancing_health_check_interval=30
load_balancing_failure_threshold=3
load_balancing_success_threshold=2
# Circuit breaker
enable_circuit_breaker=true
circuit_breaker_failure_threshold=5
circuit_breaker_timeout=60
circuit_breaker_reset_timeout=300
# Retry logic
enable_retry=true
max_retries=3
retry_delay=100
retry_max_delay=1000
retry_jitter=0.1

# ==================== RESOURCE MANAGEMENT ====================

# CPU allocation
cpu_cores=4
cpu_threads_per_core=2
cpu_affinity_enabled=true
cpu_affinity_mask=0-7
# Memory allocation
memory_limit=8G
memory_reservation=4G
shared_memory_size=1G
# GPU allocation
gpu_enabled=true
gpu_count=1
gpu_memory_fraction=0.8
gpu_visible_devices=0
# Storage allocation
model_storage_size=100G
cache_storage_size=10G
log_storage_size=20G
# Network allocation
network_bandwidth_limit=1G
max_connections=10000
keepalive_timeout=65

# ==================== LOGGING CONFIGURATION ====================

# Log levels
log_level_root=INFO
log_level_torchserve=INFO
log_level_io_ts=WARN
log_level_com_amazonaws=WARN
log_level_org_apache=WARN
# Log format
log_pattern=%d{yyyy-MM-dd HH:mm:ss} %-5p [%t] %c{1}: %m%n
log_format=json
# Log rotation
log_max_file_size=100MB
log_max_files=10
log_rotation_interval=24h
# Structured logging
enable_structured_logging=true
structured_log_fields=timestamp,level,thread,logger,message,model_name,model_version,request_id,latency
# Audit logging
audit_log_enabled=true
audit_log_format=json
audit_log_rotation_policy={
  "max_file_size": "100MB",
  "max_files": 10,
  "rotation_interval": "24h"
}

# ==================== COMPLIANCE & GOVERNANCE ====================

# GDPR compliance
gdpr_enabled=true
gdpr_data_retention_days=365
gdpr_data_encryption=true
gdpr_right_to_be_forgotten=true
# PCI compliance
pci_enabled=true
pci_audit_interval_days=90
pci_data_encryption=true
pci_access_logging=true
# SOC2 compliance
soc2_enabled=true
soc2_audit_interval_days=180
soc2_access_controls=true
soc2_security_monitoring=true
# Data governance
data_lineage_enabled=true
data_lineage_endpoint=http://data-lineage.ml-production.svc.cluster.local:8080
model_card_enabled=true
model_card_endpoint=https://model-cards.goat-prediction.com
# Audit trail
audit_trail_enabled=true
audit_trail_storage=s3://goat-prediction-audit/torchserve/
audit_trail_retention_days=365

# ==================== BACKUP & DISASTER RECOVERY ====================

# Backup configuration
backup_enabled=true
backup_schedule=0 2 * * *
backup_retention_days=30
backup_storage_provider=s3
backup_s3_bucket=goat-prediction-backups
backup_s3_prefix=torchserve/
backup_encryption_enabled=true
backup_encryption_key_path=/etc/secrets/backup.key
# Disaster recovery
disaster_recovery_enabled=true
dr_replication_factor=3
dr_region=eu-west-1,us-east-1,ap-southeast-1
dr_failover_timeout=300
dr_auto_failover=true
# High availability
high_availability_enabled=true
ha_replicas=3
ha_quorum_size=2
ha_leader_election_timeout=5000
ha_heartbeat_interval=1000
# Data replication
data_replication_enabled=true
replication_factor=3
replication_sync_mode=semi_sync
replication_max_lag=1000

# ==================== ADVANCED FEATURES ====================

# Model ensemble
enable_model_ensemble=true
ensemble_models=football_match_winner,football_over_under,football_btts
ensemble_strategy=weighted_average
ensemble_weights=0.5,0.3,0.2
# A/B testing
enable_ab_testing=true
ab_testing_groups=control,treatment
ab_testing_traffic_split=0.5,0.5
ab_testing_metrics=accuracy,latency,throughput
# Canary deployments
enable_canary_deployments=true
canary_traffic_percentage=10
canary_evaluation_period=24h
canary_success_criteria=accuracy>0.85,latency<100,error_rate<0.01
# Model explainability
enable_model_explainability=true
explainability_method=shap
explainability_sample_size=1000
explainability_endpoint=/v1/models/{model_name}/explain
# Anomaly detection
enable_anomaly_detection=true
anomaly_detection_method=isolation_forest
anomaly_detection_threshold=0.95
anomaly_alert_endpoint=/v1/alerts/anomaly
# Model drift detection
enable_model_drift_detection=true
drift_detection_method=ks_test
drift_detection_threshold=0.05
drift_detection_window_size=1000
drift_alert_endpoint=/v1/alerts/drift

# ==================== CUSTOM ENDPOINTS ====================

# Prediction endpoints
prediction_endpoint=/v1/models/{model_name}/predict
prediction_method=POST
prediction_timeout=30
prediction_rate_limit=1000
# Classification endpoints
classification_endpoint=/v1/models/{model_name}/classify
classification_method=POST
classification_timeout=30
classification_rate_limit=1000
# Regression endpoints
regression_endpoint=/v1/models/{model_name}/regress
regression_method=POST
regression_timeout=30
regression_rate_limit=1000
# Metadata endpoints
metadata_endpoint=/v1/models/{model_name}/metadata
metadata_method=GET
metadata_timeout=10
metadata_rate_limit=100
# Health endpoints
health_endpoint=/health
health_method=GET
health_timeout=5
health_rate_limit=10
# Metrics endpoints
metrics_endpoint=/metrics
metrics_method=GET
metrics_timeout=5
metrics_rate_limit=10
# Model management endpoints
models_endpoint=/v1/models
models_method=GET
models_timeout=10
models_rate_limit=100
model_versions_endpoint=/v1/models/{model_name}/versions
model_versions_method=GET
model_versions_timeout=10
model_versions_rate_limit=100

# ==================== ENVIRONMENT VARIABLES ====================

# Application environment
environment=production
cluster_name=goat-prediction-ml
namespace=ml-production
service_name=torchserve
instance_id=${HOSTNAME}
# External services
model_registry_url=https://model-registry.goat-prediction.com
feature_store_url=http://feast-feature-server.ml-production.svc.cluster.local:6566
redis_url=redis://redis-cache.ml-production.svc.cluster.local:6379
postgres_url=jdbc:postgresql://postgres.ml-production.svc.cluster.local:5432/predictions
# Monitoring services
prometheus_url=http://prometheus.monitoring.svc.cluster.local:9090
grafana_url=http://grafana.monitoring.svc.cluster.local:3000
jaeger_url=http://jaeger-query.monitoring.svc.cluster.local:16686
# Security services
vault_url=https://vault.goat-prediction.com
oauth_url=https://oauth.goat-prediction.com
# External APIs
sports_api_url=https://api.sports.goat-prediction.com
weather_api_url=https://api.weather.goat-prediction.com
odds_api_url=https://api.odds.goat-prediction.com

# ==================== DEPLOYMENT CONFIGURATION ====================

# Kubernetes configuration
kubernetes_enabled=true
kubernetes_namespace=ml-production
kubernetes_service_account=torchserve-sa
kubernetes_node_selector={
  "node-type": "inference-optimized"
}
kubernetes_tolerations=[{
  "key": "inference",
  "operator": "Equal",
  "value": "true",
  "effect": "NoSchedule"
}]
kubernetes_affinity={
  "podAntiAffinity": {
    "preferredDuringSchedulingIgnoredDuringExecution": [{
      "weight": 100,
      "podAffinityTerm": {
        "labelSelector": {
          "matchExpressions": [{
            "key": "app",
            "operator": "In",
            "values": ["torchserve"]
          }]
        },
        "topologyKey": "kubernetes.io/hostname"
      }
    }]
  }
}
# Docker configuration
docker_image=goat-prediction/torchserve:3.0.0
docker_registry=registry.goat-prediction.com
docker_pull_policy=IfNotPresent
docker_network_mode=host
# Helm configuration
helm_chart=torchserve
helm_repository=https://charts.goat-prediction.com
helm_version=3.0.0
# CI/CD configuration
ci_cd_enabled=true
ci_cd_provider=github-actions
ci_cd_workflow=.github/workflows/torchserve-deploy.yml
ci_cd_branch=main
ci_cd_environment=production

# ==================== DEBUGGING & TROUBLESHOOTING ====================

# Debug mode
debug_enabled=false
debug_port=5858
debug_address=0.0.0.0
# Profiling
profiling_enabled=false
profiling_port=6060
profiling_interval=60
# Tracing
tracing_enabled=true
tracing_sampling_rate=0.1
tracing_exporter=jaeger
# Logging debug
log_debug_requests=false
log_debug_responses=false
log_debug_handler=false
# Metrics debug
metrics_debug_enabled=false
metrics_debug_interval=10
# Health check debug
health_check_debug=false
health_check_verbose=false

# ==================== FALLBACK & DEFAULT VALUES ====================

# Default model configuration
default_min_workers=2
default_max_workers=4
default_batch_size=16
default_max_batch_delay=200
default_response_timeout=120
default_initial_workers=2
default_synchronous=true
# Default handler configuration
default_handler=goat_prediction_handler.py
default_handler_timeout=120
default_handler_max_retries=3
# Default cache configuration
default_cache_enabled=true
default_cache_ttl=3600
default_cache_size=536870912
# Default security configuration
default_enable_auth=true
default_enable_ssl=true
default_enable_rate_limit=true
# Default monitoring configuration
default_enable_metrics=true
default_metrics_format=prometheus
default_log_level=INFO

# ==================== DEPRECATION WARNINGS ====================

# Configuration migration notes
# The following parameters are deprecated and will be removed in v4.0.0:
# - use_netty_thread_pool (use number_of_netty_threads instead)
# - request_timeout (use response_timeout instead)
# - model_dir (use model_store instead)
# - log_file (use log_location instead)
#
# Migration guide: https://docs.goat-prediction.com/torchserve/migration/v3-to-v4

# ==================== DOCUMENTATION & SUPPORT ====================

# Configuration version
config_version=3.0.0
config_last_updated=2024-01-01
config_maintainer=ML Engineering Team
# Support information
support_email=torchserve@goat-prediction.com
support_slack=#torchserve-support
support_docs=https://docs.goat-prediction.com/torchserve
support_runbooks=https://runbooks.goat-prediction.com/torchserve
# SLA information
sla_availability=99.95%
sla_response_time=100ms
sla_throughput=1000rps
# Compliance information
compliance_gdpr=true
compliance_pci=true
compliance_soc2=true
# License information
license=Proprietary
license_key=${TORCHSERVE_LICENSE_KEY}

# ==================== CUSTOM PROPERTIES ====================

# Goat Prediction specific configurations
goat_prediction.environment=production
goat_prediction.cluster=ml-inference
goat_prediction.region=eu-west-1
goat_prediction.availability_zone=eu-west-1a
goat_prediction.instance_type=c6i.8xlarge
goat_prediction.cost_center=ml-inference-001
# Feature store integration
feature_store.enabled=true
feature_store.endpoint=http://feast-feature-server.ml-production.svc.cluster.local:6566
feature_store.timeout=5
feature_store.cache.enabled=true
feature_store.cache.ttl=300
feature_store.cache.size=536870912
# Model registry integration
model_registry.enabled=true
model_registry.endpoint=https://model-registry.goat-prediction.com
model_registry.auth_type=jwt
model_registry.token=${MODEL_REGISTRY_TOKEN}
model_registry.poll_interval=300
# Monitoring integration
monitoring.enabled=true
monitoring.prometheus.endpoint=http://prometheus.monitoring.svc.cluster.local:9090
monitoring.grafana.endpoint=http://grafana.monitoring.svc.cluster.local:3000
monitoring.jaeger.endpoint=http://jaeger-collector.monitoring.svc.cluster.local:14268
# Alerting integration
alerting.enabled=true
alerting.pagerduty.endpoint=https://events.pagerduty.com/v2/enqueue
alerting.pagerduty.service_key=${PAGERDUTY_SERVICE_KEY}
alerting.slack.webhook=${SLACK_WEBHOOK_URL}
alerting.email.recipients=ml-alerts@goat-prediction.com
# Backup integration
backup.enabled=true
backup.s3.bucket=goat-prediction-backups
backup.s3.prefix=torchserve/
backup.s3.region=eu-west-1
backup.s3.encryption_key=${BACKUP_ENCRYPTION_KEY}
# Security integration
security.vault.enabled=true
security.vault.endpoint=https://vault.goat-prediction.com
security.vault.token=${VAULT_TOKEN}
security.vault.secret_path=secret/torchserve
# External API integration
api.sports.enabled=true
api.sports.endpoint=https://api.sports.goat-prediction.com
api.sports.token=${SPORTS_API_TOKEN}
api.weather.enabled=true
api.weather.endpoint=https://api.weather.goat-prediction.com
api.weather.token=${WEATHER_API_TOKEN}
api.odds.enabled=true
api.odds.endpoint=https://api.odds.goat-prediction.com
api.odds.token=${ODDS_API_TOKEN}

# ==================== PERFORMANCE TUNING ====================

# JVM performance tuning
jvm_perf_tuning.enabled=true
jvm_xmx=4g
jvm_xms=2g
jvm_max_metaspace_size=512m
jvm_gc_type=G1
jvm_max_gc_pause_ms=100
jvm_gc_parallel_threads=4
jvm_gc_concurrent_threads=2
# Python performance tuning
python_perf_tuning.enabled=true
python_gc_threshold=700,10,10
python_hash_seed=0
python_pyte_version=0.10.0
python_optimize=2
# Torch performance tuning
torch_perf_tuning.enabled=true
torch_cudnn_benchmark=true
torch_cudnn_deterministic=false
torch_num_threads=4
torch_num_interop_threads=4
torch_backends_cudnn_enabled=true
# Network performance tuning
network_perf_tuning.enabled=true
network_tcp_nodelay=true
network_tcp_keepalive=true
network_tcp_keepidle=300
network_tcp_keepintvl=30
network_tcp_keepcnt=3
# Disk performance tuning
disk_perf_tuning.enabled=true
disk_read_ahead_kb=4096
disk_scheduler=noop
disk_nr_requests=256

# ==================== VALIDATION RULES ====================

# Configuration validation
validation.enabled=true
validation.strict=true
validation.allow_unknown=false
validation.fail_fast=true
# Property validation rules
validation.rules.number_of_netty_threads.min=1
validation.rules.number_of_netty_threads.max=64
validation.rules.job_queue_size.min=10
validation.rules.job_queue_size.max=10000
validation.rules.response_timeout.min=1
validation.rules.response_timeout.max=300
validation.rules.batch_size.min=1
validation.rules.batch_size.max=256
validation.rules.max_batch_delay.min=0
validation.rules.max_batch_delay.max=1000
# Environment validation
validation.env.required=TORCHSERVE_HOME,MODEL_STORE
validation.env.optional=JAVA_HOME,PYTHONPATH
# File validation
validation.files.required=/mnt/models,/etc/torchserve
validation.files.optional=/tmp,/var/log/torchserve
# Network validation
validation.network.ports.required=8080,8081,8082
validation.network.ports.optional=8443,9090
# Security validation
validation.security.ssl.required_if=enable_ssl=true
validation.security.jwt.required_if=enable_auth=true

# ==================== END OF CONFIGURATION ====================

# Notes:
# 1. This configuration file is for TorchServe v3.0.0
# 2. All paths are relative to the container filesystem
# 3. Environment variables can override any property using TORCHSERVE_ prefix
# 4. For production deployment, ensure all secrets are properly managed
# 5. Regular monitoring and maintenance required for optimal performance
#
# Deployment commands:
# torchserve --start --model-store /mnt/models --models football_match_winner=football_match_winner.mar --ts-config config.properties
#
# Verification:
# curl http://localhost:8080/ping
# curl http://localhost:8081/models
#
# Troubleshooting:
# Check logs: /var/log/torchserve/torchserve.log
# Check metrics: http://localhost:8082/metrics
# Check health: http://localhost:8080/health
#
# Support: torchserve@goat-prediction.com
# Documentation: https://docs.goat-prediction.com/torchserve
# Runbooks: https://runbooks.goat-prediction.com/torchserve
